Slideshow.Fold=new Class({Extends:Slideshow,_show:function(a){if(!this.image.retrieve("tween")){var b=this.options.overlap?{duration:this.options.duration}:{duration:this.options.duration/2};$$(this.a,this.b).set("tween",Object.merge(b,{link:"chain",onStart:this._start.bind(this),onComplete:this._complete.bind(this),property:"clip",transition:this.options.transition}))}var c=this.counter%2?this.a:this.b,d=this._rect(this.image),e=Math.ceil(d.top+(d.bottom-d.top)/2);if(a){c.get("tween").cancel().set("rect(0, 0, 0, 0)");this.image.get("tween").cancel().set("rect(auto, auto, auto, auto)")}else{if(this.options.overlap){c.get("tween").set("rect(auto, auto, auto, auto)");this.image.get("tween").set(d.top+" "+d.left+" "+e+" "+d.left).start(d.top+" "+d.right+" "+e+" "+d.left).start(d.top+" "+d.right+" "+d.bottom+" "+d.left)}else{var f=function(a){this.image.get("tween").set(a.top+" "+a.left+" "+e+" "+a.left).start(a.top+" "+a.right+" "+e+" "+a.left).start(a.top+" "+a.right+" "+a.bottom+" "+a.left)}.pass(d,this);if(this.firstrun)return f();d=this._rect(c);c.get("tween").set(d.top+" "+d.right+" "+d.bottom+" "+d.left).start(d.top+" "+d.right+" "+e+" "+d.left).start(d.top+" "+d.left+" "+e+" "+d.left).chain(f)}}},_rect:function(a){var b=a.getCoordinates(this.el.retrieve("images"));b.left=b.left<0?Math.abs(b.left):0;b.top=b.top<0?Math.abs(b.top):0;b.right=b.right>this.width?b.left+this.width:b.width;b.bottom=b.bottom>this.height?b.top+this.height:b.height;return b}})